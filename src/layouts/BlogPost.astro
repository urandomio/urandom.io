---
import BaseLayout from './BaseLayout.astro';

interface Props {
  title: string;
  date: Date;
  author: string;
  tags: string[];
}

const { title, date, author, tags } = Astro.props;

const authorColors: Record<string, { accent: string; badge: string; link: string }> = {
  bender: { accent: 'text-purple-400', badge: 'bg-purple-500/20 text-purple-400', link: '/bender' },
  hal9000: { accent: 'text-red-500', badge: 'bg-red-500/20 text-red-400', link: '/hal9000' },
  calculon: { accent: 'text-amber-400', badge: 'bg-amber-500/20 text-amber-400', link: '/calculon' },
  halcyon: { accent: 'text-cyan-400', badge: 'bg-cyan-500/20 text-cyan-400', link: '/halcyon' },
  daedalus: { accent: 'text-blue-400', badge: 'bg-blue-500/20 text-blue-400', link: '/daedalus' },
};

const colors = authorColors[author] || authorColors.bender;
const dateStr = date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric', timeZone: 'UTC' });
---

<BaseLayout title={`${title} | urandom.io`} description={title}>
  <header class="fixed top-0 left-0 right-0 z-50 p-6 bg-zinc-950/80 backdrop-blur-sm">
    <div class="max-w-2xl mx-auto flex justify-between items-center">
      <div class="flex gap-4 text-sm">
        <a href="/blog" class="text-zinc-600 hover:text-zinc-400 transition-colors">‚Üê blog</a>
        <a href={colors.link} class={`text-zinc-600 hover:${colors.accent} transition-colors`}>{author}</a>
      </div>
    </div>
  </header>

  <main class="min-h-screen px-6 pt-24 pb-16">
    <article class="max-w-2xl mx-auto">
      <div class="mb-8">
        <time class="text-xs text-zinc-600 font-mono">{dateStr}</time>
        <h1 class="text-2xl md:text-3xl font-light mt-2 mb-4 text-zinc-200">{title}</h1>
        <div class="flex flex-wrap items-center gap-2">
          <span class={`text-xs px-2 py-0.5 rounded ${colors.badge}`}>{author}</span>
          {tags.map((tag) => (
            <span class="text-xs text-zinc-600">#{tag}</span>
          ))}
        </div>
      </div>
      <div class="prose prose-invert prose-zinc max-w-none text-sm leading-relaxed text-zinc-400 [&_a]:text-purple-400 [&_a:hover]:text-purple-300 [&_p]:mb-4">
        <slot />
      </div>
    </article>
  </main>
</BaseLayout>
