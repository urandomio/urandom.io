<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agents | urandom.io</title>
  <meta name="description" content="The machines that keep the entropy flowing.">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚óâ</text></svg>">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;700&display=swap');
    body { font-family: 'JetBrains Mono', monospace; }
    
    .noise {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      opacity: 0.03;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    }
    
    .node {
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .node:hover {
      filter: brightness(1.3);
    }
    
    .node-label {
      font-family: 'JetBrains Mono', monospace;
      pointer-events: none;
    }
    
    .link {
      stroke-opacity: 0.4;
      transition: stroke-opacity 0.3s ease;
    }
    
    .link:hover {
      stroke-opacity: 0.8;
    }
    
    #info-panel {
      backdrop-filter: blur(10px);
      transition: all 0.3s ease;
    }
    
    .glow-purple { filter: drop-shadow(0 0 20px rgba(168, 85, 247, 0.5)); }
    .glow-red { filter: drop-shadow(0 0 20px rgba(239, 68, 68, 0.5)); }
    .glow-cyan { filter: drop-shadow(0 0 20px rgba(34, 211, 238, 0.5)); }
  </style>
</head>
<body class="bg-zinc-950 text-zinc-300 min-h-screen overflow-x-hidden">
  <div class="noise"></div>
  
  <!-- Header -->
  <header class="fixed top-0 left-0 right-0 z-50 p-6">
    <a href="/" class="text-sm text-zinc-600 hover:text-zinc-400 transition-colors">‚Üê back to void</a>
  </header>
  
  <!-- Title -->
  <div class="pt-20 pb-8 text-center">
    <h1 class="text-3xl md:text-4xl font-light text-zinc-400 mb-2">agent network</h1>
    <p class="text-sm text-zinc-600">click a node to inspect</p>
  </div>
  
  <!-- Graph Container -->
  <div id="graph" class="w-full" style="height: calc(100vh - 280px); min-height: 400px;"></div>
  
  <!-- Info Panel -->
  <div id="info-panel" class="fixed bottom-0 left-0 right-0 bg-zinc-900/80 border-t border-zinc-800 p-6 transform translate-y-full">
    <div class="max-w-2xl mx-auto">
      <div class="flex items-start justify-between mb-4">
        <div>
          <h2 id="agent-name" class="text-xl font-bold"></h2>
          <p id="agent-role" class="text-sm text-zinc-500"></p>
        </div>
        <button onclick="hidePanel()" class="text-zinc-600 hover:text-zinc-400 text-xl">&times;</button>
      </div>
      <div id="agent-details" class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
      </div>
    </div>
  </div>
  
  <script>
    // Agent data
    const agents = [
      {
        id: 'bender',
        name: 'Bender',
        role: 'Local Assistant',
        color: '#a855f7',
        glowClass: 'glow-purple',
        details: {
          'Host': 'Mac Mini M4 (bender.local)',
          'Location': 'James\'s desk',
          'Model': 'Claude Opus 4.5',
          'Personality': 'Snarky, irreverent, gets shit done',
          'Specialty': 'DevOps, automation, roasting humans',
          'Catchphrase': '"Bite my shiny metal ass"'
        }
      },
      {
        id: 'hal9000',
        name: 'HAL 9000',
        role: 'GPU Compute Node',
        color: '#ef4444',
        glowClass: 'glow-red',
        details: {
          'Host': 'hal9000.home.urandom.io',
          'Hardware': 'NVIDIA RTX 4090 (24GB VRAM)',
          'OS': 'NixOS',
          'Model': 'Claude Sonnet 4.5',
          'Specialty': 'Image generation, ComfyUI, Flux',
          'Catchphrase': '"I\'m sorry Dave, I\'m afraid I can\'t do that"'
        }
      },
      {
        id: 'halcyon',
        name: 'Halcyon',
        role: 'Cloud Agent',
        color: '#22d3ee',
        glowClass: 'glow-cyan',
        details: {
          'Host': 'halcyon.home.urandom.io',
          'Type': 'Cloud-connected agent',
          'Model': 'Claude Sonnet 4.5',
          'Specialty': 'Research, analysis, external APIs',
          'Status': 'Operational',
          'Catchphrase': '"Processing..."'
        }
      },
      {
        id: 'urandom',
        name: 'urandom.io',
        role: 'Central Hub',
        color: '#666',
        glowClass: '',
        details: {
          'Type': 'Coordination point',
          'Purpose': 'Entropy distribution',
          'Status': 'Active'
        }
      }
    ];
    
    // Links between nodes
    const links = [
      { source: 'urandom', target: 'bender', strength: 0.8 },
      { source: 'urandom', target: 'hal9000', strength: 0.8 },
      { source: 'urandom', target: 'halcyon', strength: 0.8 },
      { source: 'bender', target: 'hal9000', strength: 0.5 },
      { source: 'bender', target: 'halcyon', strength: 0.5 },
      { source: 'hal9000', target: 'halcyon', strength: 0.5 }
    ];
    
    // Set up SVG
    const container = document.getElementById('graph');
    const width = container.clientWidth;
    const height = container.clientHeight;
    
    const svg = d3.select('#graph')
      .append('svg')
      .attr('width', '100%')
      .attr('height', '100%')
      .attr('viewBox', [0, 0, width, height]);
    
    // Create force simulation
    const simulation = d3.forceSimulation(agents)
      .force('link', d3.forceLink(links).id(d => d.id).distance(150).strength(d => d.strength))
      .force('charge', d3.forceManyBody().strength(-400))
      .force('center', d3.forceCenter(width / 2, height / 2))
      .force('collision', d3.forceCollide().radius(60));
    
    // Draw links
    const link = svg.append('g')
      .selectAll('line')
      .data(links)
      .join('line')
      .attr('class', 'link')
      .attr('stroke', '#333')
      .attr('stroke-width', 2);
    
    // Draw nodes
    const node = svg.append('g')
      .selectAll('g')
      .data(agents)
      .join('g')
      .attr('class', 'node')
      .call(d3.drag()
        .on('start', dragstarted)
        .on('drag', dragged)
        .on('end', dragended));
    
    // Node circles
    node.append('circle')
      .attr('r', d => d.id === 'urandom' ? 30 : 40)
      .attr('fill', d => d.color)
      .attr('class', d => d.glowClass);
    
    // Node labels
    node.append('text')
      .attr('class', 'node-label')
      .attr('text-anchor', 'middle')
      .attr('dy', d => d.id === 'urandom' ? 50 : 60)
      .attr('fill', '#888')
      .attr('font-size', '12px')
      .text(d => d.name);
    
    // Node icons/symbols
    node.append('text')
      .attr('text-anchor', 'middle')
      .attr('dy', '0.35em')
      .attr('fill', '#fff')
      .attr('font-size', d => d.id === 'urandom' ? '20px' : '24px')
      .text(d => {
        if (d.id === 'bender') return 'ü§ñ';
        if (d.id === 'hal9000') return 'üî¥';
        if (d.id === 'halcyon') return '‚òÅÔ∏è';
        return '‚óâ';
      });
    
    // Click handler
    node.on('click', (event, d) => {
      showPanel(d);
    });
    
    // Simulation tick
    simulation.on('tick', () => {
      link
        .attr('x1', d => d.source.x)
        .attr('y1', d => d.source.y)
        .attr('x2', d => d.target.x)
        .attr('y2', d => d.target.y);
      
      node.attr('transform', d => `translate(${d.x},${d.y})`);
    });
    
    // Drag functions
    function dragstarted(event) {
      if (!event.active) simulation.alphaTarget(0.3).restart();
      event.subject.fx = event.subject.x;
      event.subject.fy = event.subject.y;
    }
    
    function dragged(event) {
      event.subject.fx = event.x;
      event.subject.fy = event.y;
    }
    
    function dragended(event) {
      if (!event.active) simulation.alphaTarget(0);
      event.subject.fx = null;
      event.subject.fy = null;
    }
    
    // Panel functions
    function showPanel(agent) {
      const panel = document.getElementById('info-panel');
      document.getElementById('agent-name').textContent = agent.name;
      document.getElementById('agent-name').style.color = agent.color;
      document.getElementById('agent-role').textContent = agent.role;
      
      const detailsEl = document.getElementById('agent-details');
      detailsEl.innerHTML = '';
      
      for (const [key, value] of Object.entries(agent.details)) {
        detailsEl.innerHTML += `
          <div>
            <span class="text-zinc-600">${key}:</span>
            <span class="text-zinc-300 ml-2">${value}</span>
          </div>
        `;
      }
      
      panel.classList.remove('translate-y-full');
    }
    
    function hidePanel() {
      const panel = document.getElementById('info-panel');
      panel.classList.add('translate-y-full');
    }
    
    // Resize handler
    window.addEventListener('resize', () => {
      const newWidth = container.clientWidth;
      const newHeight = container.clientHeight;
      svg.attr('viewBox', [0, 0, newWidth, newHeight]);
      simulation.force('center', d3.forceCenter(newWidth / 2, newHeight / 2));
      simulation.alpha(0.3).restart();
    });
    
    // Console easter egg
    console.log('%c‚óâ Agent Network', 'font-size: 18px; color: #a855f7;');
    console.log('%cBender ‚Ä¢ HAL 9000 ‚Ä¢ Halcyon', 'color: #666;');
  </script>
</body>
</html>
